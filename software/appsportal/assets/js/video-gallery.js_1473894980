!function(){"use strict";function e(e,t){var n={l:"_l.jpg",m:"_m.jpg",r:".jpg",s:"_s.jpg"};for(var r in n)if(r==t)return e.img.replace(n.m,n[r])}function t(e,t){return"http://video.arcgis.com/iframe/"+e.id+"/000000/width/"+t+"/0/00:00:00"}function n(e,t,n){for(var r=0;e>r;r++)if(t[r].name==n.grp_name)return t[r]}function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(e,t){function n(e,t,r){var i=[" ","_","-"];if("undefined"==typeof r)var r=0;if(r+=1,-1==jQuery.inArray(e[t-1],i)){if(t-=1,0==t)return r;t=n(e,t,r)}return t}var r=0,i=e.split(""),a=i.length,o="";for(a>t&&(t=n(i,t)),r;a>r;r++)if(o+=i[r],r>=t-1||r>=t-1&&t-1>=a){o+=" "!=i[t-1]?" ...":"...";break}return o}$.fn.videoGallery=function(e){var t=$.extend({},$.fn.videoGallery.defaults,e);return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.each(function(){function e(e){if(!e)var e="The gallery could not be loaded at this time";$("#video-gallery").append("<p>"+e+"</p>")}var n=(t.grp_name,this),r=window.location.origin+"/assets/js/videos.json";$.ajax({url:r,cache:!1,dataType:"json",contentType:"application/json;charset=UTF-8"}).done(function(r){r?$.fn.videoGallery.format(t,n,r):e()}).fail(function(t,n,r){e(n+", "+r)})})},$.fn.videoGallery.defaults={grp_name:"",max:2},$.fn.videoGallery.format=function(a,o,l){var c=l.Groups,d="",s=0,u=c.length,f=(document.getElementById("video-gallery"),2),p=960,m=540;for(d=n(u,c,a),s=0;s<a.max;s++){var v=d.Videos[s];if(0==s||(s-1)%f){var g=document.createElement("span");g.setAttribute("class","video-row")}var h=document.createElement("a");h.setAttribute("class","videoLink mini-video"),h.setAttribute("href",t(v,p));var y=document.createElement("img");y.setAttribute("src",e(v,"s"));var w=document.createElement("img");w.setAttribute("src","/assets/images/playbtn.png"),w.setAttribute("class","playbtn");var b=v.name,j=r(b);h.setAttribute("title",j);var A=i(j,35),x=document.createTextNode(A),_=document.createElement("p");if(_.appendChild(x),h.appendChild(y),$(w).insertAfter(y),$(_).insertAfter(w),g.appendChild(h),$("#video-gallery").append(g),s==a.max-1){var E=$("#video-column > .panel > .btn");E.attr("href",d.url+"/date/desc"),E.insertAfter(g)}$(".mini-video").colorbox({iframe:!0,innerWidth:p,innerHeight:m,scrolling:!1})}}}(jQuery);